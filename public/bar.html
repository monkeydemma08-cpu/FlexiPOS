<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KANM - Bar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/styles.css" />
    <script src="js/auth.js" defer></script>
    <script src="js/bar.js" defer></script>
  </head>
  <body data-role="bar">
    <header class="kanm-header">
      <div class="kanm-header-left">
        <div class="kanm-header-logo-container">
          <img id="kanm-header-logo" alt="" />
          <div id="kanm-header-logo-fallback" class="kanm-logo-fallback"></div>
        </div>

        <div class="kanm-header-texts">
          <div
            id="kanm-header-negocio-nombre-principal"
            class="kanm-header-title"
            data-negocio-titulo
          ></div>
          <div id="kanm-header-negocio-subtitulo" class="kanm-header-subtitle">Panel de bar</div>
        </div>
      </div>

      <div class="kanm-header-right">
        <div class="kanm-header-actions">
          <span class="tag-rol">Bar</span>
          <a class="kanm-button ghost chat-link" href="/chat.html">Chat interno <span id="chat-unread-badge" class="chat-unread-badge"></span></a>
          <button class="kanm-button ghost" type="button" onclick="logout()">Cerrar sesión</button>
        </div>
      </div>
    </header>

    <main class="kanm-main bar-main">
      <section class="kanm-page-header">
        <h1 class="kanm-page-title">Pedidos en barra</h1>
        <p class="kanm-page-subtitle">Gestiona bebidas y cocteles en preparación.</p>
      </section>
      <div class="kanm-tabs bar-tabs" role="tablist">
        <button class="kanm-tab active" data-tab="activos" type="button" role="tab" aria-selected="true">
          Activos
        </button>
        <button class="kanm-tab" data-tab="finalizados" type="button" role="tab" aria-selected="false">
          Finalizados del día
        </button>
      </div>

      <section class="kanm-card kanm-card--panel bar-panel" id="panel-activos" role="tabpanel">
        <div class="kanm-card-header">
          <h2>Pedidos en barra</h2>
          <p class="kanm-subtitle">Bebidas pendientes y en preparación.</p>
        </div>
        <div id="bar-pedidos-activos" class="kanm-bar-pedidos-grid" aria-live="polite"></div>
      </section>

      <section class="kanm-card kanm-card--panel bar-panel hidden" id="panel-finalizados" role="tabpanel">
        <div class="kanm-card-header">
          <h2>Pedidos del día finalizados</h2>
          <p class="kanm-subtitle">
            Pedidos marcados como listos o cancelados durante la jornada actual.
          </p>
        </div>
        <div id="bar-pedidos-finalizados" class="kanm-bar-pedidos-grid" aria-live="polite"></div>
      </section>
    </main>

    <div id="bar-focus-overlay" class="cocina-focus hidden" aria-hidden="true">
      <div class="cocina-focus-backdrop"></div>
      <div class="cocina-focus-card" role="dialog" aria-modal="true">
        <div class="cocina-focus-header">
          <div>
            <p class="cocina-focus-label">Cuenta</p>
            <h3 id="focus-cuenta"></h3>
            <p id="focus-servicio" class="kanm-subtitle"></p>
          </div>
          <button class="kanm-button ghost" type="button" id="focus-cerrar">Volver al tablero</button>
        </div>
        <div class="cocina-focus-body">
          <div class="cocina-focus-meta" id="focus-meta"></div>
          <div class="cocina-focus-nota" id="focus-nota"></div>
          <div class="cocina-focus-items" id="focus-items"></div>
        </div>
        <div class="cocina-focus-actions">
          <button class="kanm-button secondary" type="button" id="focus-preparar">Marcar preparando</button>
          <button class="kanm-button primary" type="button" id="focus-listo">Marcar listo</button>
          <button class="kanm-button ghost-danger" type="button" id="focus-cancelar">Cancelar pedido</button>
        </div>
      </div>
    </div>
  </body>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/notifications.js" defer></script>
</html>
